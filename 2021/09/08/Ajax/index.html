

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#515151">
  <meta name="description" content="">
  <meta name="author" content="Kiku">
  <meta name="keywords" content="个人 博客 技术 分享 日记 笔记 学习 文章 教程 指南 程序员">
  <title>Ajax 与前后端交互 - Kiku 的个人博客</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/vs.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.6","typing":{"enable":true,"typeSpeed":90,"cursorChar":"▁","loop":false},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"anchorjs":{"enable":false,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"copy_btn":true,"image_zoom":{"enable":true},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":true,"baidu":"d3e02bccada8177079a692ffc4daabf8","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Kiku</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/404.html">
                <i class="iconfont icon-pen"></i>
                留言板
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/404.html">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/20210226200048.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Ajax 与前后端交互">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-09-08 00:00" pubdate>
        2021年9月8日 凌晨
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      11.6k 字
    </span>
  

  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    
	
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Ajax 与前后端交互</h1>
            
            <div class="markdown-body">
              <h2 id="Ajax-概述"><a href="#Ajax-概述" class="headerlink" title="Ajax 概述"></a>Ajax 概述</h2><p>Ajax 的全称是 Asynchronous Javascript And XML（异步 JavaScript 和 XML）。</p>
<p>简单理解：在网页中利用 XMLHttpRequest 对象和服务器进行数据交互的方式，就是 Ajax。</p>
<p>XMLHttpRequest（简称 xhr）是浏览器提供的 JavaScript 成员，如果要在网页中请求服务器上的数据资源，则需要用到 XMLHttpRequest 对象。</p>
<p>客户端请求服务器时，请求的方式有很多种，最常见的两种请求方式分别为 get 和 post 请求。</p>
<ul>
<li>get 请求通常用于获取服务端资源（向服务器要资源），例如：根据 URL 地址，从服务器获取 HTML 文件、CSS 文件、JS 文件、图片文件、数据资源等。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154514.png" srcset="/img/loading.gif" alt="image-20210917221919876"></li>
<li>post 请求通常用于向服务器提交数据（往服务器发送资源），例如：登录注册时向服务器提交的登录信息、向服务器上传文件等各种数据提交操作。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154516.png" srcset="/img/loading.gif" alt="image-20210917221943692"></li>
</ul>
<p>Ajax 能让我们轻松实现网页与服务器之间的数据交互，Ajax 的典型应用场景：</p>
<ul>
<li>  用户名检测：注册用户时，动态检测用户名是否被占用；</li>
<li>  搜索提示：当输入搜索关键字时，动态加载搜索提示列表；</li>
<li>  数据分页显示：当点击页码值的时候，不用刷新页面动态刷新表格的数据；</li>
<li>  数据的增删改查：数据的添加、删除、修改、查询操作。</li>
</ul>
<h2 id="jQuery-中的-Ajax"><a href="#jQuery-中的-Ajax" class="headerlink" title="jQuery 中的 Ajax"></a>jQuery 中的 Ajax</h2><p>浏览器中提供的 XMLHttpRequest 用法比较复杂，所以 jQuery 对 XMLHttpRequest 进行了封装，提供了一系列 Ajax 相关的函数，极大地降低了 Ajax 的使用难度。</p>
<p>jQuery 中发起 Ajax 请求最常用的三个方法如下：</p>
<ul>
<li><p><code>$.get(url, [data], [callback])</code>：专门用来发起 get 请求，从而将服务器上的资源请求到客户端来进行使用。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154517.png" srcset="/img/loading.gif" alt="image-20210917215749095"></p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// $.get()发起不带参数的请求</span><br>$.get(<span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(res) <span class="hljs-comment">// 这里的 res 是服务器返回的数据</span><br>&#125;)<br><br><span class="hljs-comment">// $.get()发起带参数的请求</span><br>$.get(<span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>, &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> &#125;, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(res)<br>&#125;)<br></code></pre></td></tr></table></figure>
</li>
<li><p><code>$.post(url, [data], [callback])</code>：专门用来发起 post 请求，从而向服务器提交数据。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154518.png" srcset="/img/loading.gif" alt="image-20210917220139328"></p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">$.post(<br>   <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>, <span class="hljs-comment">// 请求的URL地址</span><br>   &#123; <span class="hljs-attr">bookname</span>: <span class="hljs-string">&#x27;水浒传&#x27;</span>, <span class="hljs-attr">author</span>: <span class="hljs-string">&#x27;施耐庵&#x27;</span>, <span class="hljs-attr">publisher</span>: <span class="hljs-string">&#x27;上海图书出版社&#x27;</span> &#125;, <span class="hljs-comment">// 提交的数据</span><br>   <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123; <span class="hljs-comment">// 回调函数</span><br>      <span class="hljs-built_in">console</span>.log(res)<br>   &#125;<br>)<br></code></pre></td></tr></table></figure>
</li>
<li><p>  <code>$.ajax(settings)</code>：<code>$.get()</code>, <code>$.post()</code> 的底层实现，它允许我们对 Ajax 请求进行更详细的配置。上传文件只能使用 <code>$.ajax()</code> 不能使用 <code>$.post()</code>，并且必须指定配置对象中的 <code>processData</code> 和 <code>contentType</code> 属性。</p>
</li>
<li><pre><code class="js">  $.ajax(&#123;
     type: &#39;&#39;, // 请求的方式，例如 GET 或 POST，请求方式可以小写可以大写，推荐大写
     url: &#39;&#39;,  // 请求的 URL 地址
     data: &#123; &#125;,// 这次请求要携带的数据
     success: function(res) &#123; &#125; // 请求成功之后的回调函数
  &#125;)

  // 使用 $.ajax() 发起 GET 请求
  $.ajax(&#123;
     type: &#39;GET&#39;, // 请求的方式
     url: &#39;http://www.liulongbin.top:3006/api/getbooks&#39;,  // 请求的 URL 地址
     data: &#123; id: 1 &#125;,// 这次请求要携带的数据
     success: function(res) &#123; // 请求成功之后的回调函数
         console.log(res)
     &#125;
  &#125;)

  // 使用 $.ajax() 发起 POST 请求
  $.ajax(&#123;
     type: &#39;POST&#39;, // 请求的方式
     url: &#39;http://www.liulongbin.top:3006/api/addbook&#39;,  // 请求的 URL 地址
     data: &#123; // 要提交给服务器的数据
        bookname: &#39;水浒传&#39;,
        author: &#39;施耐庵&#39;,
        publisher: &#39;上海图书出版社&#39;
      &#125;,
     success: function(res) &#123; // 请求成功之后的回调函数
         console.log(res)
     &#125;
  &#125;)
  <figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><br>`<span class="javascript">$(<span class="hljs-built_in">document</span>).ajaxStart()</span>` 和  `<span class="javascript">$(<span class="hljs-built_in">document</span>).ajaxStop()</span>` 函数会监听当前文档内所有的 Ajax 请求，当发出新的 Ajax 请求或 Ajax 请求结束（可能是请求成功或者请求超时失败）会触发相应的回调函数。<br><br>```<span class="javascript">js</span><br><span class="javascript"><span class="hljs-comment">// 自 jQuery 版本 1.8 起，ajaxStart() 和 ajaxStop() 方法只能被附加到文档</span></span><br><span class="javascript">$(<span class="hljs-built_in">document</span>).ajaxStart(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">     <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;发出了一个 Ajax 请求&quot;</span>);</span><br><span class="javascript">&#125;)</span><br><br><span class="javascript">$(<span class="hljs-built_in">document</span>).ajaxStop(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="javascript">     <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Ajax 请求结束&quot;</span>);</span><br><span class="javascript">&#125;)</span><br></code></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="接口文档规范"><a href="#接口文档规范" class="headerlink" title="接口文档规范"></a>接口文档规范</h2><p>使用 Ajax 请求数据时，被请求的 URL 地址，就叫做数据接口（简称接口）。</p>
<p>接口文档，顾名思义就是接口的说明文档，它是我们调用接口的依据。好的接口文档包含了对接口 URL，参数以及输出内容的说明，参照接口文档就能方便的知道接口的作用，以及接口如何进行调用。</p>
<p>接口文档可以包含很多信息，也可以按需进行精简，不过，一个合格的接口文档，应该包含以下 6 项内容，从而为接口的调用提供依据：</p>
<ol>
<li>  接口名称：用来标识各个接口的简单说明，如登录接口，获取图书列表接口等。</li>
<li>  接口 URL：接口的调用地址。</li>
<li>  调用（请求）方式：接口的调用（请求）方式，如 GET 或 POST。</li>
<li>  参数格式：接口需要传递的参数，每个参数必须包含参数名称、参数类型否必选、参数说明这4项内容。</li>
<li>  响应格式：接口的返回值的详细描述，一般包含数据名称、数据类型、说明3项内容。</li>
<li>  返回示例（可选）：通过对象的形式，例举服务器返回数据的结构。</li>
</ol>
<p>接口文档实例：</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154519.png" srcset="/img/loading.gif" alt="image-20210917222659894"></p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154520.png" srcset="/img/loading.gif" alt="image-20210917222725164"></p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154521.png" srcset="/img/loading.gif" alt="image-20210917222732127"></p>
<h2 id="form-表单"><a href="#form-表单" class="headerlink" title="form 表单"></a>form 表单</h2><p>表单在网页中主要负责数据采集功能。HTML 中的 <code>&lt;form&gt;</code> 标签，就是用于采集用户输入的信息。通过 <code>&lt;form&gt;</code> 标签的提交操作，把采集到的信息提交到服务器端进行处理。</p>
<p><code>&lt;form&gt;</code> 标签中的属性则是用来规定如何把采集到的数据发送到服务器。</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154522.png" srcset="/img/loading.gif" alt="image-20210918154941942"></p>
<ul>
<li>  <code>action</code>：用来规定当提交表单时，向何处发送表单数据。一般来说 <code>action</code> 属性的值应该是后端提供的一个 URL 地址，这个 URL 地址专门负责接收表单提交过来的数据。当 <code>&lt;form&gt;</code> 表单在未指定 <code>action</code> 属性值的情况下，<code>action</code> 的默认值为当前页面的 URL 地址。</li>
<li><code>target</code>：用来规定在何处打开 <code>action</code> 属性指定的 URL 。<code>target</code> 的默认值是 <code>_self</code>，表示在相同的框架中打开，当提交表单后，当前标签会立即跳转到 <code>action</code> 属性指定的 URL 地址。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154523.png" srcset="/img/loading.gif" alt="image-20210918155829957"></li>
<li>  <code>method</code>：用来规定以何种方式把表单数据提交到服务器。可选值有两个，分别是 <code>get</code> 和 <code>post</code>。<code>method</code> 的默认值为 <code>get</code>，表示以 URL 查询参数形式把表单数据提交到 <code>action</code> 属性指定的 URL 地址。get 方式适合用来提交少量的、简单的数据。post 方式适合用来提交大量的、复杂的、或包含文件上传的数据。实际开发中，<code>&lt;form&gt;</code> 表单的 post 提交方式用的最多，很少用 get。例如登录、注册、添加数据等表单操作，都需要使用 post 方式来提交表单。</li>
<li>  <code>enctype</code>：用来规定在发送表单数据之前如何对数据进行编码。可选值有三个，<code>enctype</code> 的默认值为 <code>application/x-www-form-urlencoded</code>，表示在发送前编码所有的字符。在涉及到文件上传的操作时，必须将 <code>enctype</code> 的值设置为 <code>multipart/form-data</code>。如果表单的提交不涉及到文件上传操作，则不设置直接使用默认值即可。<img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154524.png" srcset="/img/loading.gif" alt="image-20210918155938355"></li>
</ul>
<p>通过点击表单域中提交按钮，触发表单提交的操作，从而使页面跳转到 action URL 的行为，叫做表单的同步提交。</p>
<p>同步提交后，整个页面会发生跳转，跳转到 <code>action</code> 属性中所指向的 URL 地址，页面之前的状态和数据会丢失，用户体验很差。</p>
<p>实际开发中往往表单只负责采集数据，再使用 Ajax 请求将表单中数据提交到服务器，这也叫做表单的异步提交。</p>
<p>使用 Ajax 提交表单数据有以下几个步骤：</p>
<ol>
<li><p>监听表单提交事件，在 jQuery 中，可以使用如下两种方式，监听到表单的提交事件：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&#x27;#form1&#x27;</span>).submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>&#123;<br>   alert(<span class="hljs-string">&#x27;监听到了表单的提交事件&#x27;</span>)<br>&#125;)<br><br>$(<span class="hljs-string">&#x27;#form1&#x27;</span>).on(<span class="hljs-string">&#x27;submit&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>&#123;<br>   alert(<span class="hljs-string">&#x27;监听到了表单的提交事件&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure>
</li>
<li><p>阻止表单默认提交行为，当监听到表单的提交事件以后，可以调用事件对象的 <code>event.preventDefault()</code> 函数，来阻止表单的提交和页面的跳转：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">$(<span class="hljs-string">&#x27;#form1&#x27;</span>).submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>&#123;<br>   <span class="hljs-comment">// 阻止表单的提交和页面的跳转</span><br>   e.preventDefault()<br>&#125;)<br><br>$(<span class="hljs-string">&#x27;#form1&#x27;</span>).on(<span class="hljs-string">&#x27;submit&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>&#123;<br>   <span class="hljs-comment">// 阻止表单的提交和页面的跳转</span><br>   e.preventDefault()<br>&#125;)<br></code></pre></td></tr></table></figure>
</li>
<li><p>获取表单中的数据，通过 DOM 操作获取表单域 <code>&lt;input&gt;</code> 元素的值。在 jQuery 中使用 <code>serialize()</code> 函数，可以一次性获取到表单中的所有的数据，简化表单中数据的获取操作。<br>  <strong>注意：使用 <code>serialize()</code> 函数快速获取表单数据时，必须为每个表单元素添加 <code>name</code> 属性！</strong></p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;form1&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;zhangsan&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>提交<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">    <span class="hljs-built_in">console</span>.log($(<span class="hljs-string">&#x27;#form1&#x27;</span>).serialize());	<span class="hljs-comment">// username=zhangsan&amp;password=123456</span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="art-template-模板引擎"><a href="#art-template-模板引擎" class="headerlink" title="art-template 模板引擎"></a>art-template 模板引擎</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>以往我们要通过字符串拼接或者 ES6 中的模板字符串将数据嵌套到 HTML 结构字符串中，然后根据得到的新字符串创建新的元素节点插入到 DOM 中，来动态添加新元素。</p>
<p>如果元素结构比较复杂，则拼接字符串的时候需要格外注意引号之间的嵌套。且一旦需求发生变化，修改起来也非常麻烦。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;div&gt;爱好：<br>    &lt;ul id=<span class="hljs-string">&quot;hobby&quot;</span>&gt;<br>        &lt;li&gt;爱好<span class="hljs-number">1</span>&lt;/li&gt;<br>        &lt;li&gt;爱好<span class="hljs-number">2</span>&lt;/li&gt;<br>    &lt;/ul&gt;<br>&lt;/div&gt;<br>&lt;script&gt;<br>    <span class="hljs-keyword">var</span> data = &#123;<br>        hobby: [<span class="hljs-string">&#x27;吃饭&#x27;</span>, <span class="hljs-string">&#x27;睡觉&#x27;</span>, <span class="hljs-string">&#x27;打豆豆&#x27;</span>]<br>    &#125;<br>    <span class="hljs-keyword">var</span> rows = [];<br>    <span class="hljs-comment">// 循环拼接字符串</span><br>    $.each(data.hobby, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i, item</span>) </span>&#123;<br>        rows.push(<span class="hljs-string">&#x27;&lt;li&gt;&#x27;</span> + item + <span class="hljs-string">&#x27;&lt;/li&gt;&#x27;</span>);<br>    &#125;)<br>    <span class="hljs-comment">// 将字符串数组转换为一个长的字符串让后渲染到页面</span><br>    $(<span class="hljs-string">&#x27;#hobby&#x27;</span>).html(rows.join(<span class="hljs-string">&#x27;&#x27;</span>)); <span class="hljs-comment">// $(&#x27;#hobby&#x27;).empty().append(rows.join(&#x27;&#x27;));</span><br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<p>而模板引擎可以根据程序员指定的模板结构和数据，自动生成一个完整的 HTML 页面（片段）。使用模板引擎减少了字符串的拼接操作，使代码结构更清晰，更易于阅读与维护。</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154525.png" srcset="/img/loading.gif" alt="image-20210919155101947"></p>
<p><a target="_blank" rel="noopener" href="http://aui.github.io/art-template/zh-cn/">art-template</a> 是一个简约、超快的模板引擎。中文官网首页为 <a target="_blank" rel="noopener" href="http://aui.github.io/art-template/zh-cn/index.html">http://aui.github.io/art-template/zh-cn/index.html</a></p>
<h3 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h3><ol>
<li><p>导入 art-template：从<a target="_blank" rel="noopener" href="http://aui.github.io/art-template/zh-cn/docs/installation.html">官网</a>将 <code>template-web.js</code> 下载到本地或者直接引入 CDN 上的脚本文件。导入脚本后就可以在全局中使用 <code>template()</code> 函数。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script src=<span class="hljs-string">&quot;https://unpkg.com/art-template@4.13.2/lib/template-web.js&quot;</span>&gt;&lt;/script&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>定义模板：在 <code>&lt;script&gt;</code> 标签中，定义模板的 HTML 结构，HTML 结构里面可以根据 art-template 的语法嵌入各种占位符。 <code>&lt;script&gt;</code> 标签 <code>type</code> 属性的默认值为 <code>text/javascript</code>，所以一定要显示指定 <code>type</code> 属性的值为 <code>text/html</code>，否则其中的 HTML 片段会被当成 JavaScript 代码执行。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script type=<span class="hljs-string">&quot;text/html&quot;</span> id=<span class="hljs-string">&quot;tpl-hobby&quot;</span>&gt;<br>    &lt;ul id=<span class="hljs-string">&quot;hobby&quot;</span>&gt;<br>        &lt;li&gt;&#123;&#123;hobby[<span class="hljs-number">0</span>]&#125;&#125;&lt;/li&gt;<br>        &lt;li&gt;&#123;&#123;hobby[<span class="hljs-number">1</span>]&#125;&#125;&lt;/li&gt;<br>        &lt;li&gt;&#123;&#123;hobby[<span class="hljs-number">2</span>]&#125;&#125;&lt;/li&gt;<br>    &lt;/ul&gt;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>  准备要渲染的数据。</p>
</li>
<li><p>  调用 <code>template(templateID, data)</code> 函数生成 HTML 结构字符串，<code>templateID</code> 是模板的 ID 属性值，<code>data</code> 是需要渲染的数据对象，返回经过模板引擎处理后的 HTML 结构字符串。</p>
</li>
<li><p>  通过 DOM 操作将 HTML 结构字符串渲染到页面上。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">&quot;en&quot;</span>&gt;<br>&lt;head&gt;<br>    &lt;meta charset=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;<br>    &lt;meta name=<span class="hljs-string">&quot;viewport&quot;</span> content=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;<br>    &lt;meta http-equiv=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> content=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;<br>    &lt;title&gt;Document&lt;/title&gt;<br>    &lt;!-- <span class="hljs-number">1.</span>导入 art-template --&gt;<br>    &lt;script src=<span class="hljs-string">&quot;./template-web.js&quot;</span>&gt;&lt;/script&gt;<br>    &lt;script src=<span class="hljs-string">&quot;./jquery-3.6.0.js&quot;</span>&gt;&lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;div&gt;爱好：<br>    &lt;/div&gt;<br>    &lt;!-- <span class="hljs-number">2.</span>定义模板 --&gt;<br>    &lt;script type=<span class="hljs-string">&quot;text/html&quot;</span> id=<span class="hljs-string">&quot;tpl-hobby&quot;</span>&gt;<br>        &lt;ul id=<span class="hljs-string">&quot;hobby&quot;</span>&gt;<br>            &lt;li&gt;&#123;&#123;hobby[<span class="hljs-number">0</span>]&#125;&#125;&lt;/li&gt;<br>            &lt;li&gt;&#123;&#123;hobby[<span class="hljs-number">1</span>]&#125;&#125;&lt;/li&gt;<br>            &lt;li&gt;&#123;&#123;hobby[<span class="hljs-number">2</span>]&#125;&#125;&lt;/li&gt;<br>        &lt;/ul&gt;<br>    &lt;/script&gt;<br>    &lt;script&gt;<br>        <span class="hljs-comment">// 3.准备数据</span><br>        <span class="hljs-keyword">var</span> data = &#123;<br>            hobby: [<span class="hljs-string">&#x27;吃饭&#x27;</span>, <span class="hljs-string">&#x27;睡觉&#x27;</span>, <span class="hljs-string">&#x27;打豆豆&#x27;</span>]<br>        &#125;;<br>        <span class="hljs-comment">// 4.调用 `template(templateID, data)` 函数生成 HTML 结构字符串</span><br>        <span class="hljs-keyword">var</span> htmlStr = template(<span class="hljs-string">&quot;tpl-hobby&quot;</span>, data);<br>        <span class="hljs-comment">// 5.通过 DOM 操作将 HTML 结构字符串渲染到页面上。</span><br>        $(<span class="hljs-string">&#x27;div&#x27;</span>).append(htmlStr);<br>    &lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>

<h3 id="标准语法"><a href="#标准语法" class="headerlink" title="标准语法"></a>标准语法</h3><p>在模板的两个大括号内可以进行变量输出，或循环数组等基基础操作，这种 <code>&#123;&#123; &#125;&#125;</code> 语法在 art-template 中被称为标准语法。</p>
<ul>
<li><p>基本输出：变量的输出、对象属性的输出、三元表达式输出、逻辑或输出、加减乘除等表达式输出。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;&#123;value&#125;&#125;<br>&#123;&#123;obj.key&#125;&#125;<br>&#123;&#123;obj[&#x27;key&#x27;]&#125;&#125;<br>&#123;&#123;a ? b : c&#125;&#125;<br>&#123;&#123;a || b&#125;&#125;<br>&#123;&#123;a + b&#125;&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>原文输出：如果要输出的变量值中，包含了 HTML 标签结构，则需要使用原文输出语法，才能保证 HTML 标签被正常渲染。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;&#123;@ value &#125;&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>条件输出：使用 if … else if … /if 对变量的值进行判断，按需输出。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;&#123;if conditionExpression&#125;&#125; 按需输出的内容 &#123;&#123;/if&#125;&#125;<br><br>&#123;&#123;if exp1&#125;&#125; 按需输出的内容 &#123;&#123;else if exp2&#125;&#125; 按需输出的内容 &#123;&#123;/if&#125;&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>循环输出：通过 each 语法循环数组，当前循环的索引使用 <code>$index</code> 进行访问，当前的循环项使用 <code>$value</code> 进行访问。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;&#123;each arr&#125;&#125;<br>    &#123;&#123;$index&#125;&#125;<br>	&#123;&#123;$value&#125;&#125;<br>&#123;&#123;/each&#125;&#125;  <br></code></pre></td></tr></table></figure>

<p>  在前面使用步骤的举例的模板就可以使用 each 循环语法：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script type=<span class="hljs-string">&quot;text/html&quot;</span> id=<span class="hljs-string">&quot;tpl-hobby&quot;</span>&gt;<br>    &lt;ul id=<span class="hljs-string">&quot;hobby&quot;</span>&gt;<br>        &#123;&#123;each hobby&#125;&#125;<br>        &lt;li&gt;&#123;&#123;$value&#125;&#125;&lt;/li&gt;<br>        &#123;&#123;/each&#125;&#125;<br>    &lt;/ul&gt;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>过滤器：过滤器语法使用管道操作符将变量和多个过滤器连接起来，它的上一个输出作为下一个输入，最后一个函数的返回值才是最终的结果。</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;&#123;value | filterName1 | filterName2&#125;&#125;<br></code></pre></td></tr></table></figure>

<p>  过滤器本质就是一个处理函数，将原始输入经过一系列处理后再输出。只有使用如下语法定义的函数对象才能在模板中被使用。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">template.defaults.imports.filterName1 = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>)</span>&#123;<br>    <span class="hljs-comment">/* 将原始输入经过一系列处理 */</span><br>    <br>    <span class="hljs-comment">/*return处理的结果*/</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>  例如定义一个格式化时间的过滤器 dateFormat 如下：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">template.defaults.imports.dateFormat = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">date</span>) </span>&#123;<br>    <span class="hljs-keyword">var</span> y = date.getFullYear()<br>    <span class="hljs-keyword">var</span> m = date.getMonth() + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">var</span> d = date.getDate()<br><br>    <span class="hljs-keyword">return</span> y + <span class="hljs-string">&#x27;-&#x27;</span> + m + <span class="hljs-string">&#x27;-&#x27;</span> + d <span class="hljs-comment">// 注意，过滤器最后一定要 return 一个值</span><br> &#125;<br></code></pre></td></tr></table></figure>

<p>  在模板中就可以使用这个格式化时间的过滤器：</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/html&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tpl-demo&quot;</span>&gt;</span><br><span class="handlebars"><span class="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>注册时间：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">regTime</span> | dateFormat&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="模板引擎实现原理"><a href="#模板引擎实现原理" class="headerlink" title="模板引擎实现原理"></a>模板引擎实现原理</h3><p>模板引擎的主要功能就是用正则表达式和字符串替换操作来实现的。</p>
<p>正则表达式对象的 <code>exec()</code> 函数用于检索传入的字符串中和该正则表达式的匹配情况。如果匹配成功，则返回一个数组（但是包含额外的属性 <code>index</code> 和 <code>input</code>），里面有匹配结果的相关信息，否则返回 <code>null</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&#x27;hello&#x27;</span><br><span class="hljs-keyword">var</span> pattern = <span class="hljs-regexp">/o/</span><br><span class="hljs-comment">// [&quot;o&quot;, index: 4, input: &quot;hello&quot;, groups: undefined]</span><br><span class="hljs-built_in">console</span>.log(pattern.exec(str)) <br></code></pre></td></tr></table></figure>

<p>正则表达式中小括号包起来的内容表示一个分组，分组会单独提取成为匹配结果伪数组中一个元素。</p>
<p>伪数组中第一个元素为该正则表达式所匹配到的完整字符串，后面的元素为小括号分组匹配到的子字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&#x27;&lt;div&gt;姓名：&#123;&#123;name&#125;&#125;&lt;/div&gt;&#x27;</span><br><span class="hljs-keyword">var</span> pattern = <span class="hljs-regexp">/&#123;&#123;([a-zA-Z]+)&#125;&#125;/</span><br><span class="hljs-keyword">var</span> patternResult = pattern.exec(str)<br><span class="hljs-built_in">console</span>.log(patternResult) 	<span class="hljs-comment">// [&#x27;&#123;&#123;name&#125;&#125;&#x27;, &#x27;name&#x27;, index: 7, input: input: &#x27;&lt;div&gt;姓名：&#123;&#123;namea&#125;&#125;&lt;/div&gt;&#x27;,groups: undefined]</span><br>str = str.replace(patternResult[<span class="hljs-number">0</span>], patternResult[<span class="hljs-number">1</span>]); <span class="hljs-comment">// 使用 `replace()` 进行字符串替换</span><br><span class="hljs-built_in">console</span>.log(str); 				<span class="hljs-comment">// &lt;div&gt;姓名：name&lt;/div&gt;</span><br></code></pre></td></tr></table></figure>

<p>使用循环匹配替换所有的占位符：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;今年&#123;&#123; age &#125;&#125;岁了&lt;/div&gt;&#x27;</span>;<br><span class="hljs-keyword">var</span> pattern = <span class="hljs-regexp">/&#123;&#123;\s*([a-zA-Z]+)\s*&#125;&#125;/</span>;	<span class="hljs-comment">// 使用 \s 修剪两端的空格</span><br><span class="hljs-keyword">var</span> patternResult = <span class="hljs-literal">null</span>;<br><span class="hljs-comment">// 所有都匹配结束，patternResult 为 null 结束循环</span><br><span class="hljs-keyword">while</span>(patternResult = pattern.exec(str)) &#123;<br>   str = str.replace(patternResult[<span class="hljs-number">0</span>], patternResult[<span class="hljs-number">1</span>]);<br>&#125;<br><span class="hljs-built_in">console</span>.log(str) 	<span class="hljs-comment">// &lt;div&gt;name今年age岁了&lt;/div&gt;</span><br></code></pre></td></tr></table></figure>

<p>将 <code>replace()</code> 函数的第二个参数换成真正想要替换的对象中的属性值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> data = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;张三&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> &#125;;<br><span class="hljs-keyword">var</span> str = <span class="hljs-string">&#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;今年&#123;&#123; age &#125;&#125;岁了&lt;/div&gt;&#x27;</span>;<br><span class="hljs-keyword">var</span> pattern = <span class="hljs-regexp">/&#123;&#123;\s*([a-zA-Z]+)\s*&#125;&#125;/</span>;<br><span class="hljs-keyword">var</span> patternResult = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">while</span> ((patternResult = pattern.exec(str))) &#123;<br>   str = str.replace(patternResult[<span class="hljs-number">0</span>], data[patternResult[<span class="hljs-number">1</span>]]);<br>&#125;<br><span class="hljs-built_in">console</span>.log(str);<br></code></pre></td></tr></table></figure>

<p>实现简易的模板引擎：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user-box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 定义模板结构 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/html&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tpl-user&quot;</span>&gt;</span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>姓名：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">name</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>年龄：</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">age</span> &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>性别：</span><span class="hljs-template-variable">&#123;&#123;  <span class="hljs-name">gender</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>住址：</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">address</span>  &#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="javascript">        <span class="hljs-comment">// 封装的 template 函数</span></span><br><span class="javascript">        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">template</span>(<span class="hljs-params">id, data</span>) </span>&#123;</span><br><span class="javascript">            <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">document</span>.getElementById(id).innerHTML</span><br><span class="handlebars"><span class="xml">            var pattern = /</span><span class="hljs-template-variable">&#123;&#123;\<span class="hljs-name">s</span>*(<span class="hljs-name">[a-zA-Z]</span>+)\s*&#125;&#125;</span><span class="xml">/</span></span><br><span class="javascript">            <span class="hljs-keyword">var</span> pattResult = <span class="hljs-literal">null</span></span><br><span class="javascript">            <span class="hljs-keyword">while</span> ((pattResult = pattern.exec(str))) &#123;</span><br>                str = str.replace(pattResult[0], data[pattResult[1]])<br>            &#125;<br><span class="javascript">            <span class="hljs-keyword">return</span> str</span><br>        &#125;<br><span class="javascript">        <span class="hljs-comment">// 定义数据</span></span><br><span class="javascript">        <span class="hljs-keyword">var</span> data = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zs&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">28</span>, <span class="hljs-attr">gender</span>: <span class="hljs-string">&#x27;男&#x27;</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;北京顺义马坡&#x27;</span> &#125;</span><br><span class="javascript">        <span class="hljs-comment">// 调用模板函数</span></span><br><span class="javascript">        <span class="hljs-keyword">var</span> htmlStr = template(<span class="hljs-string">&#x27;tpl-user&#x27;</span>, data)</span><br><span class="javascript">        <span class="hljs-comment">// 渲染 HTM L结构</span></span><br><span class="javascript">        <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;user-box&#x27;</span>).innerHTML = htmlStr</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="Ajax-加强"><a href="#Ajax-加强" class="headerlink" title="Ajax 加强"></a>Ajax 加强</h2><h3 id="XMLHttpRequest-对象"><a href="#XMLHttpRequest-对象" class="headerlink" title="XMLHttpRequest 对象"></a>XMLHttpRequest 对象</h3><p><code>XMLHttpRequest</code>（简称 xhr）是浏览器预置的 JavaScript 成员，通过它可以请求服务器上的数据资源。jQuery 中的 Ajax 相关的函数，就是基于 xhr 对象封装出来的。</p>
<p>使用 xhr 发起 GET 请求的步骤：</p>
<ol>
<li>  创建 <code>XMLHttpRequest</code> 对象；</li>
<li>  调用 xhr 对象的<code>open()</code> 函数；</li>
<li>  调用 xhr 对象的 <code>send()</code> 函数；</li>
<li>  监听 xhr 对象的<code>onreadystatechange</code> 事件，请求完成时对响应对处理。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 创建 XHR 对象</span><br><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br><span class="hljs-comment">// 2. 调用 open 函数，指定 请求方式 与 URL地址</span><br>xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/getbooks&#x27;</span>)<br><span class="hljs-comment">// 3. 调用 send 函数，发起 Ajax 请求</span><br>xhr.send()<br><span class="hljs-comment">// 4. 监听 onreadystatechange 事件</span><br>xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">// 4.1 监听 xhr 对象的请求状态 readyState ；与服务器响应的状态 status</span><br>    <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span> &amp;&amp; xhr.status === <span class="hljs-number">200</span>) &#123;<br>        <span class="hljs-comment">// 4.2 打印服务器响应回来的数据</span><br>        <span class="hljs-built_in">console</span>.log(xhr.responseText)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>使用 xhr 发起 POST请求的步骤：</p>
<ol>
<li>  创建 <code>XMLHttpRequest</code> 对象；</li>
<li>  调用 xhr 对象的<code>open()</code> 函数；</li>
<li>  设置 xhr 对象的 <code>Content-Type</code> 属性，application/x-www-form-urlencoded</li>
<li>  调用 xhr 对象的 <code>send()</code> 函数，同时指定要发送的数据；</li>
<li>  监听 xhr 对象的<code>onreadystatechange</code> 事件，请求完成时对响应对处理。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 创建 xhr 对象</span><br><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br><span class="hljs-comment">// 2. 调用 open()</span><br>xhr.open(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/addbook&#x27;</span>)<br><span class="hljs-comment">// 3. 设置 Content-Type 属性（固定写法）</span><br>xhr.setRequestHeader(<span class="hljs-string">&#x27;Content-Type&#x27;</span>, <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span>)<br><span class="hljs-comment">// 4. 调用 send()，同时将数据以查询字符串的形式，提交给服务器</span><br>xhr.send(<span class="hljs-string">&#x27;bookname=水浒传&amp;author=施耐庵&amp;publisher=天津图书出版社&#x27;</span>)<br><span class="hljs-comment">// 5. 监听 onreadystatechange 事件</span><br>xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span> &amp;&amp; xhr.status === <span class="hljs-number">200</span>) &#123;<br>        <span class="hljs-built_in">console</span>.log(xhr.responseText)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>使用 xhr 发起 POST 请求的步骤和发起 GET 请求的步骤大致一样，区别是在调用 <code>open()</code> 函数时请求方式改为 ‘POST’，在调用 <code>send()</code> 函数之前需要设置 <code>Content-Type</code> 属性。</p>
<p><code>XMLHttpRequest</code> 对象的 <code>readyState</code> 属性，用来表示当前 Ajax 请求所处的状态。每个 Ajax 请求必然处于以下状态中的一个：</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154526.png" srcset="/img/loading.gif" alt="image-20210919225529979"></p>
<h3 id="查询字符串"><a href="#查询字符串" class="headerlink" title="查询字符串"></a>查询字符串</h3><p>查询字符串（Query String）是指在 URL 地址末尾加上的用于向服务器发送参数信息的字符串，也叫 URL 参数。<br>查询字符串的格式：将英文的 <code>?</code> 放在 URL 中请求路径的末尾，传递的参数信息用 <code>=</code> 连接成键值对，如果有多个参数的话，使用 <code>&amp;</code> 符号进行分隔。以这个形式，可以将想要发送给服务器的数据添加到 URL 中。</p>
<p>下面 URL 最后面的 <code>?wd=JavaScript&amp;ie=UTF-8</code> 就是查询字符串。<strong>注意：查询字符串不包括 <code>#</code> 后面的锚点信息。</strong></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>www.baidu.com/s?wd=JavaScript&amp;ie=UTF-<span class="hljs-number">8</span><span class="hljs-comment">#11</span><br></code></pre></td></tr></table></figure>

<p>使用 xhr 对象发起带参数的 GET 请求时，只需在调用 <code>open()</code> 函数时在 URL 地址后面按照格式拼接上参数即可。</p>
<p>jQuery 中使用 <code>$.ajax()</code> 和  <code>$.get()</code> 发起带参数的 GET 请求，可以使用对象来传递参数信息。但本质上，都是直接将参数以查询字符串的形式，追加到 URL 地址的后面，发送到服务器的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">$.get(<span class="hljs-string">&#x27;url&#x27;</span>, &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zs&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;)<br><span class="hljs-comment">// 等价于</span><br>$.get(<span class="hljs-string">&#x27;url?name=zs&amp;age=20&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;)<br><br>$.ajax(&#123; <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;url&#x27;</span>, <span class="hljs-attr">data</span>: &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zs&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>&#125;, <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125; &#125;)<br><span class="hljs-comment">// 等价于</span><br>$.ajax(&#123; <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;url?name=zs&amp;age=20&#x27;</span>, <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125; &#125;)<br></code></pre></td></tr></table></figure>

<h3 id="JSON-数据交换格式"><a href="#JSON-数据交换格式" class="headerlink" title="JSON 数据交换格式"></a>JSON 数据交换格式</h3><p>数据交换格式，就是服务器端（后端）与客户端（前端）之间进行数据传输与交换的格式。</p>
<p>比较流行的两种数据交换格式分别是 XML 和 JSON。其中 XML 因为格式臃肿，传输效率低和解析不方便，已经很少在数据传输上被使用了，更多用在服务端的配置文件上。而 JSON 是在 2001 年开始被推广和使用的数据格式，到现今为止，JSON 已经成为了主流的数据交换格式。因此重点要学习的数据交换格式就是 JSON。</p>
<p>JSON 是一种轻量级的文本数据交换格式，在作用上类似于 XML，专门用于存储和传输数据，但是 JSON 比 XML 更小、更快、更易解析。</p>
<p>概念：JSON 的英文全称是 JavaScript Object Notation，即 JavaScript 对象表示法。准确来说是 Javascript 对象和数组的字符串表示法，它使用文本（即一个长的字符串）表示一个 JavaScript 对象或数组的信息，JSON 的本是一个字符串。</p>
<p>JSON 中只包含对象和数组两种结构，JSON 的最外层必须是对象或数组格式。通过这两种结构的相互嵌套，可以表示各种复杂的数据结构。</p>
<ul>
<li><p>对象结构：对象结构在 JSON 中表示为花括号括起来的形如 { key: value, key: value, … } 键值对结构。其中，key 必须是使用英文的双引号包裹的字符串，value 的数据类型只能是数字、字符串、布尔值、null、数组、对象这 6 种类型。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;zs&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">20</span>,<br>    <span class="hljs-string">&quot;gender&quot;</span>: <span class="hljs-string">&quot;男&quot;</span>,<br>    <span class="hljs-string">&quot;address&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-string">&quot;hobby&quot;</span>: [<span class="hljs-string">&quot;吃饭&quot;</span>, <span class="hljs-string">&quot;睡觉&quot;</span>, <span class="hljs-string">&quot;打豆豆&quot;</span>]<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>数组结构：数组结构在 JSON 中表示为方括号括起来的形如 [ “javascript”, 30, true … ] 有序列表结构 。数组中数据的类型只能是数字、字符串、布尔值、null、数组、对象这 6 种类型。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">[ <span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;python&quot;</span>, <span class="hljs-string">&quot;php&quot;</span> ]<br>[ <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">300.5</span> ]<br>[ <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span> ]<br>[ &#123; <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;zs&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">20</span>&#125;, &#123; <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">30</span>&#125; ]<br>[ [ <span class="hljs-string">&quot;苹果&quot;</span>, <span class="hljs-string">&quot;榴莲&quot;</span>, <span class="hljs-string">&quot;椰子&quot;</span> ], [ <span class="hljs-number">4</span>, <span class="hljs-number">50</span>, <span class="hljs-number">5</span> ] ]<br></code></pre></td></tr></table></figure>

</li>
</ul>
<p>JSON 语法和 JavaScript 中的对象声明和数组声明很像，但不是严格意义上的 JavaScript 子集。典型区别如下：</p>
<ol>
<li>  字符串类型的值必须使用双引号包裹，不允许使用单引号表示字符串。</li>
<li>  JSON 对象结构中 key 必须是字符串，即被双引号包裹，而 JavaScript 中对象属性名可以使用单引号，甚至省略引号。</li>
<li>  JSON 对象结构中 value 不能为 undefined，表示值为空应该使用 null。</li>
<li>  JSON 对象结构中 value 不能为函数对象。</li>
<li>  JSON 规范中使用逗号分割相邻的元素，但是最后一个元素的末尾不能有多余的逗号。</li>
<li>  JSON 规范不允许加注释，防止过多的注释，影响了文件本身的数据载体的目的，因为 JSON 本意就是让程序来处理的，而不是让人类去读的。<a target="_blank" rel="noopener" href="https://json5.org/">JSON5</a>（JSON for Humans） 在 JSON 规范的基础上做了一些拓展，允许使用单行和多行注释。</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;gender&quot;</span>: &#x27;男&#x27;,		   <span class="hljs-comment">// 违反上面第 1 条</span><br>    name: &quot;zs&quot;,				// 违反上面第 2 条<br>    &#x27;age&#x27;: 20,				// 违反上面第 2 条<br>    &quot;address&quot;: undefined,	// 违反上面第 3 条<br>    say: function() &#123;&#125;,		// 违反上面第 4 条<br>    &quot;hobby&quot;: [&quot;吃饭&quot;, &quot;睡觉&quot;, &#x27;打豆豆&#x27;],	// 违反上面第 5 条<br>&#125;<br></code></pre></td></tr></table></figure>

<p>JSON 字符串可以和 JavaScript 对象（包括数组）相互转换。</p>
<p>把字符串转换为数据对象的过程，叫做反序列化，使用 <code>JSON.parse()</code> 方法从 JSON 字符串转换为 JavaScript 对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> obj = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-string">&#x27;&#123;&quot;a&quot;: &quot;Hello&quot;, &quot;b&quot;: &quot;World&quot;&#125;&#x27;</span>)<br><span class="hljs-built_in">console</span>.log(obj);	<span class="hljs-comment">// &#123; a: &#x27;Hello&#x27;, b: &#x27;World&#x27; &#125;</span><br></code></pre></td></tr></table></figure>

<p>把数据对象转换为字符串的过程，叫做序列化，使用 <code>JSON.stringify()</code> 方法从 JavaScript 对象转换为 JSON 字符串：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> json = <span class="hljs-built_in">JSON</span>.stringify(&#123; <span class="hljs-attr">a</span>: <span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">&#x27;World&#x27;</span> &#125;)<br><span class="hljs-built_in">console</span>.log(json);	<span class="hljs-comment">// &#123;&quot;a&quot;:&quot;Hello&quot;,&quot;b&quot;:&quot;World&quot;&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="XMLHttpRequest-Level2-的新特性"><a href="#XMLHttpRequest-Level2-的新特性" class="headerlink" title="XMLHttpRequest Level2 的新特性"></a>XMLHttpRequest Level2 的新特性</h3><p>在很早之前 <code>XMLHttpRequest</code> 对象只支持文本数据的传输，无法用来读取和上传文件，并且传送和接收数据时，没有进度信息，只能监听请求有没有完成。<br>XMLHttpRequest Level2 赋予了 <code>XMLHttpRequest</code> 对象新的特性：</p>
<ol>
<li><p>可以设置 Ajax 请求的时限：Ajax 操作时间受网络环境影响，而且无法预知要花多少时间。如果网速很慢，用户可能要等很久。新版本的 <code>XMLHttpRequest</code> 对象，增加了 <code>timeout</code> 属性，可以设置 HTTP 请求的时限，过了这个时限，就自动停止 Ajax 请求。与之配套的还有一个 <code>timeout</code> 事件，用来指定超时发生时的回调函数：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">xhr.timeout = <span class="hljs-number">3000</span>;<br>xhr.ontimeout = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>&#123;<br>    alert(<span class="hljs-string">&#x27;请求超时！&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>新增了一个 <code>FormData</code> 对象，方便表单处理。可以根据表单元素创建一个 <code>FormData</code> 对象，会自动将表单中的数据填充到 <code>FormData</code> 对象中：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 获取表单元素</span><br><span class="hljs-keyword">var</span> form = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;#form1&#x27;</span>)<br><span class="hljs-comment">// 监听表单元素的 submit 事件</span><br>form.addEventListener(<span class="hljs-string">&#x27;submit&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>&#123;<br>    e.preventDefault()<br>    <span class="hljs-comment">// 根据 form 表单创建 FormData 对象，会自动将表单数据填充到 FormData 对象中</span><br>    <span class="hljs-keyword">var</span> fd = <span class="hljs-keyword">new</span> FormData(form)<br>    <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br>    xhr.open(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/formdata&#x27;</span>)<br>    xhr.send(fd)<br>    xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br>&#125;)<br><br></code></pre></td></tr></table></figure>

<p>  也可以使用该对象来模拟表单的提交操作：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 新建 FormData 对象</span><br><span class="hljs-keyword">var</span> fd = <span class="hljs-keyword">new</span> FormData()<br><span class="hljs-comment">// 2. 为 FormData 添加表单项</span><br>fd.append(<span class="hljs-string">&#x27;uname&#x27;</span>, <span class="hljs-string">&#x27;zs&#x27;</span>)<br>fd.append(<span class="hljs-string">&#x27;upwd&#x27;</span>, <span class="hljs-string">&#x27;123456&#x27;</span>)<br><span class="hljs-comment">// 3. 创建 XHR 对象</span><br><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br><span class="hljs-comment">// 4. 指定请求类型与URL地址</span><br>xhr.open(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/formdata&#x27;</span>)<br><span class="hljs-comment">// 5. 直接提交 FormData 对象，这与提交网页表单的效果，完全一样</span><br>xhr.send(fd)<br></code></pre></td></tr></table></figure>

<p>  将文件对象追加到 <code>FormData</code> 对象中，就可以上传指定文件：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> files = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;#file1&#x27;</span>).files;<br><span class="hljs-keyword">if</span> (files.length &lt;= <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-keyword">return</span> alert(<span class="hljs-string">&#x27;请选择要上传的文件！&#x27;</span>)<br>&#125;<br><span class="hljs-comment">// 1. 创建 FormData 对象</span><br><span class="hljs-keyword">var</span> fd = <span class="hljs-keyword">new</span> FormData()<br><span class="hljs-comment">// 2. 向 FormData 中追加文件</span><br>fd.append(<span class="hljs-string">&#x27;avatar&#x27;</span>, files[<span class="hljs-number">0</span>])<br><span class="hljs-comment">// 3 创建 xhr 对象</span><br><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br><span class="hljs-comment">// 4. 调用 open 函数，指定请求类型与URL地址。其中，请求类型必须为 POST</span><br>xhr.open(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/upload/avatar&#x27;</span>)<br><span class="hljs-comment">// 5. 发起请求</span><br>xhr.send(fd)<br></code></pre></td></tr></table></figure>

<p>  使用 jQuery 配合 <code>FormData</code> 对象发起上传文件的请求时，不能对数据进行编码，必须指定 <code>contentType</code> 和 <code>processData</code> 的属性值为 <code>false</code>：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1. 创建 FormData 对象</span><br><span class="hljs-keyword">var</span> fd = <span class="hljs-keyword">new</span> FormData()<br><span class="hljs-comment">// 2. 向 FormData 中追加文件</span><br>fd.append(<span class="hljs-string">&#x27;avatar&#x27;</span>, files[<span class="hljs-number">0</span>])<br><br>$.ajax(&#123;<br>    method: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>    url: <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/upload/avatar&#x27;</span>,<br>    data: fd,<br>    <span class="hljs-comment">// 不修改 Content-Type 属性，使用 FormData 默认的 Content-Type 值</span><br>    contentType: <span class="hljs-literal">false</span>,<br>    <span class="hljs-comment">// 不对 FormData 中的数据进行 url 编码，而是将 FormData 数据原样发送到服务器</span><br>    processData: <span class="hljs-literal">false</span>,<br>    success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(res)<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>
</li>
<li><p>可以通过监听 <code>xhr.upload.onprogress</code> 事件，可以获取文件上传的进度信息：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 创建 XHR 对象</span><br><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br><span class="hljs-comment">// 监听 xhr.upload 的 onprogress 事件</span><br>xhr.upload.onprogress = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>&#123;<br>    <span class="hljs-comment">// e.lengthComputable 是一个布尔值，表示当前上传的资源是否具有可计算的长度</span><br>    <span class="hljs-keyword">if</span> (e.lengthComputable) &#123;<br>        <span class="hljs-comment">// e.loaded 已传输的字节，e.total 需传输的总字节，相除即得传输进度百分比</span><br>        <span class="hljs-keyword">var</span> percentComplete = <span class="hljs-built_in">Math</span>.ceil((e.loaded / e.total) * <span class="hljs-number">100</span>)<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h2><p>Axios 是专注于网络数据请求的库。相比于原生的 XMLHttpRequest 对象，Axios 简单易用。相比于 jQuery，Axios 更加轻量化，只专注于网络数据请求。</p>
<p>导入 Axios：将 <code>axios.min.js</code> 下载到本地或者直接引入 CDN 上的脚本文件。导入脚本后就可以在全局中使用 <code>axios</code> 对象。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>使用 <code>axios</code> 对象发起 get 请求的语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 查询参数可以直接拼接在 URL 后面，或者通过参数对象传递 </span><br>axios.get(<span class="hljs-string">&#x27;url&#x27;</span>, &#123; <span class="hljs-attr">params</span>: &#123; <span class="hljs-comment">/*查询参数*/</span> &#125; &#125;).then(callback);<br></code></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 请求的 URL 地址</span><br><span class="hljs-keyword">var</span> url = <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/get&#x27;</span><br><span class="hljs-comment">// 请求的参数对象</span><br><span class="hljs-keyword">var</span> paramsObj = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zs&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> &#125;<br><span class="hljs-comment">// 调用 axios.get() 发起 GET 请求</span><br>axios.get(url, &#123; <span class="hljs-attr">params</span>: paramsObj &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123;<br>    <span class="hljs-comment">// res.data 是服务器返回的数据</span><br>    <span class="hljs-keyword">var</span> result = res.data<br>    <span class="hljs-built_in">console</span>.log(res)<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>使用 <code>axios</code> 对象发起 post 请求的语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">axios.post(<span class="hljs-string">&#x27;url&#x27;</span>, &#123; <span class="hljs-comment">/*参数*/</span> &#125;).then(callback)<br></code></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 请求的 URL 地址</span><br><span class="hljs-keyword">var</span> url = <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span><br><span class="hljs-comment">// 要提交到服务器的数据</span><br><span class="hljs-keyword">var</span> dataObj = &#123; <span class="hljs-attr">location</span>: <span class="hljs-string">&#x27;北京&#x27;</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;顺义&#x27;</span> &#125;<br><span class="hljs-comment">// 调用 axios.post() 发起 POST 请求</span><br>axios.post(url, dataObj).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123;<br>    <span class="hljs-comment">// res.data 是服务器返回的数据</span><br>    <span class="hljs-keyword">var</span> result = res.data<br>    <span class="hljs-built_in">console</span>.log(result)<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>直接使用 <code>axios()</code> 方法发起请求，类似于 jQuery 中 <code>$.ajax()</code> 的传入一个对象设置请求的相关信息：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">axios(&#123;<br>    method: <span class="hljs-string">&#x27;请求类型&#x27;</span>,<br>    url: <span class="hljs-string">&#x27;请求的URL地址&#x27;</span>,<br>    data: &#123; <span class="hljs-comment">/* POST数据 */</span> &#125;,<br>    params: &#123; <span class="hljs-comment">/* GET参数 */</span> &#125;<br>&#125;) .then(callback)<br></code></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 使用 axios() 方法发起 get 请求   </span><br>axios(&#123;<br>    method: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>    url: <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/get&#x27;</span>,<br>    params: &#123; <span class="hljs-comment">// GET 参数要通过 params 属性提供</span><br>        name: <span class="hljs-string">&#x27;zs&#x27;</span>,<br>        age: <span class="hljs-number">20</span><br>    &#125;<br>&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(res.data)<br>&#125;)<br><br><span class="hljs-comment">// 使用 axios() 方法发起 post 请求  </span><br>axios(&#123;<br>    method: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>    url: <span class="hljs-string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span>,<br>    data: &#123; <span class="hljs-comment">// POST 数据要通过 data 属性提供</span><br>        bookname: <span class="hljs-string">&#x27;程序员的自我修养&#x27;</span>,<br>        price: <span class="hljs-number">666</span><br>    &#125;<br>&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(res.data)<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>关于 Axios 库的更多用法参考<a target="_blank" rel="noopener" href="https://axios-http.com/zh/docs/intro">官方文档</a>。</p>
<h2 id="同源策略和跨域"><a href="#同源策略和跨域" class="headerlink" title="同源策略和跨域"></a>同源策略和跨域</h2><p>同源：如果两个页面的协议，域名和端口都相同，则两个页面具有相同的源。例如，下表给出了相对于 <a target="_blank" rel="noopener" href="http://www.test.com/index.html">http://www.test.com/index.html</a> 页面的同源检测：</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154527.png" srcset="/img/loading.gif" alt="image-20210920235252171"></p>
<p>同源策略（Same origin policy）是浏览器提供的一个安全功能。同源策略限制了从同一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的重要安全机制。</p>
<p>通俗的理解：浏览器中 A 网站的 JavaScript 脚本，不允许和非同源的网站 B 之间，进行资源的交互，例如：</p>
<ul>
<li>  无法读取非同源网页的 Cookie、LocalStorage 和 IndexedDB</li>
<li>  无法接触非同源网页的 DOM</li>
<li>  无法向非同源地址发送 Ajax 请求</li>
</ul>
<p>跨域：非同源的 URL 之间进行资源的交互访问。</p>
<p>浏览器允许发起跨域网络请求，但是，跨域请求回来的数据，会被浏览器的同源策略给拦截，无法被页面获取到。</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154528.png" srcset="/img/loading.gif" alt="image-20210921001055021"></p>
<h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><p>实现跨域数据请求，最主要的两种解决方案，分别是 JSONP 和 CORS。</p>
<ul>
<li>  JSONP：出现的早，兼容性好（兼容低版本IE）。是前端程序员为了解决跨域问题，被迫想出来的一种临时解决方案。缺点是只支持 GET 请求，不支持 POST 请求。</li>
<li>  CORS：出现的较晚，它是 W3C 标准，属于跨域 Ajax 请求的根本解决方案。支持 GET 和 POST 请求。缺点是不兼容某些低版本的浏览器。</li>
</ul>
<p>JSONP（JSON with Padding) 是 JSON 的一种使用模式，可用于解决主流浏览器的跨域数据访问的问题。</p>
<p>由于浏览器同源策略的限制，网页中无法通过 Ajax 向非同源的接口请求数据。但是 <code>&lt;script&gt;</code> 标签不会受浏览器同源策略的影响，即可以请求接收非同源站点的 JavaScript 脚本。</p>
<p>JSONP 请求的原理：通过 <code>&lt;script&gt;</code> 标签的 <code>src</code> 属性，请求跨域的数据接口，接口返回一个函数调用的语句，该函数处理接口响应回来的数据（通常是 JSON）。</p>
<p>使用 JSONP 发起跨域请求的步骤。 </p>
<ol>
<li><p>定义一个成功回调函数，JSONP 请求成功后会自动动调用该函数对响应数据做处理：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">success</span>(<span class="hljs-params">data</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;获取到了data数据：&#x27;</span>)<br>    <span class="hljs-built_in">console</span>.log(data)<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>通过 <code>&lt;script&gt;</code> 标签，向接口请求数据，<code>src</code> 属性值即为 GET请求的 URL 地址，查询字符串中除了 GET 请求的相关参数信息，还要指定成功回调函数的名称。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script src=<span class="hljs-string">&quot;https://suggest.taobao.com/sug?q=apple&amp;callback=success&quot;</span>&gt;&lt;/script&gt;<br></code></pre></td></tr></table></figure>
</li>
<li><p>服务端返回脚本并执行，脚本中就是一行 JavaScript 代码——将服务器响应结果——JSON 对象直接作为实参传入成功回调函数中并调用。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js">success(&#123;<br>	<span class="hljs-string">&quot;result&quot;</span>: [<br>		[<br>			<span class="hljs-string">&quot;applewatch表带&quot;</span>,<br>			<span class="hljs-string">&quot;9306.792483204854&quot;</span><br>		],<br>		[<br>			<span class="hljs-string">&quot;applewatch&quot;</span>,<br>			<span class="hljs-string">&quot;9106.716268073735&quot;</span><br>		],<br>		[<br>			<span class="hljs-string">&quot;applepencil&quot;</span>,<br>			<span class="hljs-string">&quot;4213.880638420522&quot;</span><br>		]<br>	],<br>	<span class="hljs-string">&quot;shop&quot;</span>: <span class="hljs-string">&quot;apple&quot;</span>,<br>	<span class="hljs-string">&quot;tmall&quot;</span>: <span class="hljs-string">&quot;apple&quot;</span><br>&#125;)<br></code></pre></td></tr></table></figure>

</li>
</ol>
<p>由于 JSONP 是通过 <code>&lt;script&gt;</code> 标签的 <code>src</code> 属性，来实现跨域数据获取的，而 <code>&lt;script&gt;</code> 标签只能发出 GET 请求，所以，JSONP 只支持 GET 数据请求，不支持 POST 请求。</p>
<p>JSONP 请求的 type 类型为 script 类型，本质就是请求了一个脚本文件。</p>
<blockquote>
<p>  json是理想的数据交换格式，但没办法跨域直接获取，于是就将json包裹(padding)在一个合法的js语句中作为js文件传过去。这就是json和jsonp的区别，json是想要的东西，jsonp是达到这个目的而普遍采用的一种方法，当然最终获得和处理的还是json。所以说json是目的，jsonp只是手段。json总会用到，而jsonp只有在跨域获取数据才会用到。<br>  ————————————————<br>  版权声明：本文为CSDN博主「一只大海」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>  原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44392418/article/details/88782809">https://blog.csdn.net/weixin_44392418/article/details/88782809</a></p>
</blockquote>
<p>JSONP 没有用到 <code>XMLHttpRequest</code> 这个对象，JSONP 和 Ajax 之间没有任何关系，不能把 JSONP 请求数据的方式叫做 Ajax 请求。</p>
<p>jQuery 提供的 <code>$.ajax()</code> 函数，除了可以发起真正的 Ajax 数据请求之外，还能够发起 JSONP 数据请求，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">$.ajax(&#123;<br>    url: <span class="hljs-string">&#x27;https://suggest.taobao.com/sug?q=apple&#x27;</span>,<br>    <span class="hljs-comment">// 如果要使用 $.ajax() 发起 JSONP 请求，必须指定 datatype 为 jsonp</span><br>    dataType: <span class="hljs-string">&#x27;jsonp&#x27;</span>,<br>    success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(res)<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>使用 <code>$.ajax()</code> 发起 JSONP 请求时，配置对象的 <code>datatype</code> 属性值必须为 <code>&#39;jsonp&#39;</code>，这样请求就会默认携带一个 callback=jQueryxxx 的参数，会自动拼接在 GET 请求 URL 的查询字符串上，其中 jQueryxxx 是随机生成的成功回调函数名称，和配置对象中的 <code>success</code> 属性指向同一个函数对象。</p>
<p>有时服务端接口约定的成功回调函数参数名不一定是 <code>callback</code>，也可能是 <code>cb</code>、<code>cbk</code> 等。可以通过修改配置对象 <code>jsonp</code> 和 <code>jsonpCallback</code> 两个属性的来自定义 JSONP 请求中回调函数的参数名和参数值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js">jQueryxxx$.ajax(&#123;<br>    url: <span class="hljs-string">&#x27;https://suggest.taobao.com/sug?q=apple&#x27;</span>,<br>    dataType: <span class="hljs-string">&#x27;jsonp&#x27;</span>,<br>    <span class="hljs-comment">// 发送到服务端的参数名称，默认值为 callback</span><br>    jsonp: <span class="hljs-string">&#x27;cb&#x27;</span>,<br>    <span class="hljs-comment">// 自定义的回调函数名称，默认值为 jQueryxxx 格式</span><br>    jsonpCallback: <span class="hljs-string">&#x27;abc&#x27;</span>,<br>    success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(res)<br>    &#125;<br>&#125;)<br><span class="hljs-comment">// 最终 JSONP 发出的 GET 请求的 URL 地址查询字符串为：?q=apple&amp;cb=abc</span><br><span class="hljs-comment">// 默认为 ?q=apple&amp;callback=success</span><br></code></pre></td></tr></table></figure>

<p>jQuery 中的 JSONP 请求也是通过 <code>&lt;script&gt;</code> 标签实现的，但是jQuery 采用的是动态创建和移除 <code>&lt;script&gt;</code> 标签的方式：在发起 JSONP 请求的时候，动态向 <code>&lt;header&gt;</code>  内部尾部追加一个 <code>&lt;script&gt;</code> 标签，JSONP 请求成功以后，动态从 <code>&lt;header&gt;</code> 中移除刚才追加进去的 <code>&lt;script&gt;</code> 标签。</p>
<p>跨域的接口请求是否要使用 JSONP 要根据服务端的设定而定，如果在服务器端已经处理好了该接口的跨域问题，那么直接通过普通的 Ajax 请求就可以跨域访问了；如果服务端想让前端来使用 JSONP 的方式来跨域访问，在服务端要提前配置好处理 JSONP 请求的函数，该函数根据 URL 中是否有 callback 参数判断是 JSONP 请求，如果是则将响应数据包裹在调用语句中作为脚本文件返回。当然服务端也有可能对 JSONP 请求不做特殊处理直接返回响应，这样返回的数据会被浏览器给拦截，而无法实现跨域访问。</p>
<h2 id="节流和防抖"><a href="#节流和防抖" class="headerlink" title="节流和防抖"></a>节流和防抖</h2><p>节流（throttle）策略当指事件被触发后，立即执行回调，但在一段时间内该时间不可以被再次触发。可以类比 moba 游戏中英雄释放技能有 CD，一段时间只能释放一次。</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154529.png" srcset="/img/loading.gif" alt="image-20210922160228397"></p>
<p>防抖（debounce）策略是当事件被触发后，延迟一段时间后再执行回调，如果在这段时间内事件又被触发，则重新开始计时。可以类比 moba 游戏中英雄释放回城技能有（前摇）等待时间，必须等待计时结束技能才生效，如果前摇被打断只能重新开始计时。</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154530.png" srcset="/img/loading.gif" alt="image-20210922160214740"></p>
<p>节流的应用场景</p>
<ol>
<li>  鼠标连续点击轮播图切换按钮，只在单位时间内只触发一次或者轮播图动画完成才能切换下一张。</li>
<li>  鼠标跟随事件不必时刻监听鼠标位置，可以间隔很短的时间监听。</li>
<li>  懒加载时要监听计算滚动条的位置，但不必每次页面滚动都触发事件，滚动一定距离再触发事件。</li>
</ol>
<p>防抖的应用场景：</p>
<ol>
<li>  在搜索框输入关键词，只有在停止输入一段时间后才会向服务器发送查询搜索建议的 Ajax 请求，这样可以减少请求次数，节约请求资源。</li>
<li>  当调整浏览器窗口大小时，resize 事件过于频繁，造成计算过多，此时可以使用防抖，调整完毕后再触发 resize 操作。</li>
<li>  在文本编辑器实时保存，当无任何更改操作一秒后再进行保存。</li>
</ol>
<p>节流和防抖的对比：当事件短时间内被频繁触发时，节流和防抖都能减少事件处理中某些步骤（例如Ajax 请求、DOM 操作）的触发频率，从而节约 CPU 、网络资源，提升性能。</p>
<p>节流是触发事件就立刻执行操作，但在该周期内后面的触发都会被忽略。防抖是某个周期内只有最后有一次触发事件会真正执行操作，这个周期内的前面的触发都会被忽略。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>    <span class="hljs-keyword">var</span> btn1 = $(<span class="hljs-string">&#x27;#button1&#x27;</span>);<br>    <span class="hljs-keyword">var</span> btn2 = $(<span class="hljs-string">&#x27;#button2&#x27;</span>);<br><br>    <span class="hljs-comment">// 定义节流阀开关</span><br>    <span class="hljs-keyword">var</span> timer1 = <span class="hljs-literal">null</span>;<br>    btn1.click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-comment">// 每次执行操作前先判断节流阀开关状态，如果节流阀为空，表示可以执行操作</span><br>        <span class="hljs-keyword">if</span> (!timer1) &#123;<br>            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;点击了节流按钮&quot;</span>);<br>            $(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&quot;disabled&quot;</span>, <span class="hljs-literal">true</span>);<br>            timer1 = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>                <span class="hljs-comment">// 将节流阀重置为空，下次可以执行操作</span><br>                timer1 = <span class="hljs-literal">null</span>;<br>                $(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&quot;disabled&quot;</span>, <span class="hljs-literal">false</span>);<br><br>            &#125;, <span class="hljs-number">1000</span>);<br>        &#125;<br>    &#125;)<br><br>    <span class="hljs-comment">// 定义防抖开关</span><br>    <span class="hljs-keyword">var</span> timer2 = <span class="hljs-literal">null</span>;<br>    btn2.click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-comment">// 触发事件时先清空之前的计时器重新计时，一定要用 clearTimeout() 清空计时器而不是赋值 null</span><br>        <span class="hljs-built_in">clearTimeout</span>(timer2);<br>        $(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&quot;disabled&quot;</span>, <span class="hljs-literal">true</span>);<br>        <span class="hljs-comment">// 如果一段时间内没有再次触发事件即可执行操作</span><br>        timer2 = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;点击了防抖按钮&quot;</span>);<br>            $(<span class="hljs-built_in">this</span>).attr(<span class="hljs-string">&quot;disabled&quot;</span>, <span class="hljs-literal">false</span>);<br>        &#125;, <span class="hljs-number">1000</span>);<br>    &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<h2 id="HTTP-协议"><a href="#HTTP-协议" class="headerlink" title="HTTP 协议"></a>HTTP 协议</h2><p>HTTP 协议即超文本传送协议 (HyperText Transfer Protocol) ，它规定了客户端与服务器之间进行网页内容传输时，所必须遵守的传输格式。</p>
<p>HTTP 协议采用了 请求/响应 的交互模型。客户端要以 HTTP 协议要求的格式把数据提交到服务器。服务器要以 HTTP 协议要求的格式把内容响应给客户端。</p>
<p>由于 HTTP 协议属于客户端浏览器和服务器之间的通信协议。因此，客户端发起的请求叫做 HTTP 请求，客户端发送到服务器的消息，叫做 HTTP 请求消息；服务器返回的响应叫做 HTTP 响应，服务器响应给客户端的消息，叫做HTTP 响应消息。</p>
<h3 id="HTTP-请求消息"><a href="#HTTP-请求消息" class="headerlink" title="HTTP 请求消息"></a>HTTP 请求消息</h3><p>HTTP 请求消息又叫做 HTTP 请求报文。HTTP 请求消息由请求行（request line）、请求头部（ header）、空行和请求体 4 个部分组成。</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154532.png" srcset="/img/loading.gif" alt="image-20210922201015017"></p>
<ul>
<li><p>请求行：由请求方式、URL 和 HTTP 协议版本 3 个部分组成，他们之间使用空格隔开。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154533.png" srcset="/img/loading.gif" alt="image-20210922201325974"><br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154534.png" srcset="/img/loading.gif" alt="image-20210922201331151"></p>
</li>
<li><p>请求头部：用来描述客户端的基本信息，从而把客户端相关的信息告知服务器。请求头部由多行键值对组成，每行的键和值之间用英文的冒号分隔。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154535.png" srcset="/img/loading.gif" alt="image-20210922201405689"><br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154536.png" srcset="/img/loading.gif" alt="image-20210922201509234"><br>  常见的请求头字段说明：<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154537.png" srcset="/img/loading.gif" alt="image-20210922201439011"></p>
</li>
<li><p>空行：用来分隔请求头部与请求体。最后一个请求头字段的后面是一个空行，通知服务器请求头部至此结束。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154538.png" srcset="/img/loading.gif" alt="image-20210922201619545"></p>
</li>
<li><p>请求体：存放着要通过 POST 方式提交到服务器的数据。<br>  <strong>注意：只有 POST 请求才有请求体，GET 请求没有请求体。</strong></p>
</li>
</ul>
<h3 id="HTTP-响应消息"><a href="#HTTP-响应消息" class="headerlink" title="HTTP 响应消息"></a>HTTP 响应消息</h3><p>HTTP 响应消息又叫作响应报文。HTTP响应消息由状态行、响应头部、空行 和 响应体 4 个部分组成。</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154539.png" srcset="/img/loading.gif" alt="image-20210922202529814"></p>
<ul>
<li>状态行：状态行由 HTTP 协议版本、状态码和状态码的描述文本 3 个部分组成，他们之间使用空格隔开。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154540.png" srcset="/img/loading.gif" alt="image-20210922202651567"><br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154541.png" srcset="/img/loading.gif" alt="image-20210922202701352"></li>
<li>响应头部：用来描述服务器的基本信息。响应头部由多行键值对组成，每行的键和值之间用英文的冒号分隔。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154542.png" srcset="/img/loading.gif" alt="image-20210922202732801"><br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154543.png" srcset="/img/loading.gif" alt="image-20210922202750165"></li>
<li>空行：用来分隔响应头部与响应体。在最后一个响应头部字段结束之后，会紧跟一个空行，用来通知客户端响应头部至此结束。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154544.png" srcset="/img/loading.gif" alt="image-20210922202934241"></li>
<li>响应体：存放的着服务器响应给客户端的资源内容。<br>  <img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154545.png" srcset="/img/loading.gif" alt="image-20210922203009235"></li>
</ul>
<h3 id="HTTP-请求方法"><a href="#HTTP-请求方法" class="headerlink" title="HTTP 请求方法"></a>HTTP 请求方法</h3><p>HTTP 请求方法，属于 HTTP 协议中的一部分，请求方法的作用是：用来表明要对服务器上的资源执行的操作。最常用的请求方法是 GET 和 POST。<br><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154546.png" srcset="/img/loading.gif" alt="image-20210922203453243"></p>
<h3 id="HTTP-响应状态码"><a href="#HTTP-响应状态码" class="headerlink" title="HTTP 响应状态码"></a>HTTP 响应状态码</h3><p>HTTP 响应状态码（HTTP Status Code），也属于 HTTP 协议的一部分，用来标识响应的状态。响应状态码会随着响应消息一起被发送至客户端浏览器，浏览器根据服务器返回的响应状态码，就能知道这次 HTTP 请求的结果是成功还是失败。</p>
<p>HTTP 状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字用来对状态码进行细分。根据第一位数字可以分为 5 种类型：</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154547.png" srcset="/img/loading.gif" alt="image-20210922204507100"></p>
<p>2** 成功相关的响应状态码，表示服务器已成功接收到请求并进行处理。常见的 2** 类型的状态码如下：</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154549.png" srcset="/img/loading.gif" alt="image-20210922204615484"></p>
<p>3** 重定向相关的响应状态码，表示表示服务器要求客户端重定向，需要客户端进一步的操作以完成资源的请求。常见的 3** 类型的状态码如下：</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154550.png" srcset="/img/loading.gif" alt="image-20210922204648894"></p>
<p>4** 客户端错误相关的响应状态码，表示客户端的请求有非法内容，从而导致这次请求失败。常见的 4** 类型的状态码如下：</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154551.png" srcset="/img/loading.gif" alt="image-20210922204719068"></p>
<p>5** 服务端错误相关的响应状态码，表示服务器未能正常处理客户端的请求而出现意外错误。常见的 5** 类型的状态码如下：</p>
<p><img src="https://kiku-blogpic.oss-cn-shenzhen.aliyuncs.com/img/202110192154552.png" srcset="/img/loading.gif" alt="image-20210922204752286"></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><p>  <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV11N411o7wU">2021黑马前端最新进阶班</a></p>
</li>
<li><p>  <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON">MDN：JSON</a></p>
</li>
<li><p>  <a target="_blank" rel="noopener" href="https://www.json.org/json-zh.html">JSON 规范</a></p>
</li>
</ol>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0/">自学笔记</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E7%BD%91%E7%BB%9C/">网络</a>
                    
                      <a class="hover-with-bg" href="/tags/JavaScript/">JavaScript</a>
                    
                      <a class="hover-with-bg" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a>
                    
                      <a class="hover-with-bg" href="/tags/jQuery/">jQuery</a>
                    
                      <a class="hover-with-bg" href="/tags/Ajax/">Ajax</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/10/13/VPS%20%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">VPS 初体验（一）基础配置</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/06/30/jQuery%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/">
                        <span class="hidden-mobile">jQuery 快速入门</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2"></div>
    
  </div>
</div>

<!-- Custom -->



    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     © 2020 - 2021 @ <a href="https://kiku.vip" target="_blank" rel="nofollow noopener"><span>Kiku</span></a><br> Powered by <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> | Theme -  <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":200})
    NProgress.start()
    document.addEventListener('DOMContentLoaded', function() {
      window.NProgress && window.NProgress.inc();
    })
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>





  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>












  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?d3e02bccada8177079a692ffc4daabf8";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
